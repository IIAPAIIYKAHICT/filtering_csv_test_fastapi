{% extends "base.html" %} {% block title %}Job Listings{% endblock %} {% block
page_title %}Available Job Listings{% endblock %} {% block content %}
<form method="get" action="/vacancies" class="form search-form">
  <input
    type="text"
    name="search"
    placeholder="Search vacancies..."
    value="{{ search if search != 'None' else '' }}"
    class="form-input"
  />
  <div class="form-buttons">
    <button type="submit" class="btn search-button">Search</button>
    <a href="/vacancies" class="btn reset-button" style="text-decoration: none"
      >Reset Search</a
    >
  </div>
</form>

<div class="sort-buttons">
  <h3>Sort by:</h3>
  {% for field in ['Date Posted', 'Job Title', 'Salary'] %} {% if sort_by ==
  field %} {% set current_order = 'asc' if order == 'desc' else 'desc' %} {%
  else %} {% set current_order = 'asc' %} {% endif %}
  <a
    href="/vacancies?page=1{% if search %}&search={{ search }}{% endif %}&sort_by={{ field }}&order={{ current_order }}"
  >
    <button class="btn">{{ field }}</button>
  </a>
  {% endfor %}
</div>

{% if message %}
<p>{{ message }}</p>
{% else %}
<div class="vacancies-list">
  {% for record in records %}
  <div class="vacancy-card">
    <p>
      <strong>Date Posted:</strong> {{ record['Date
      Posted'].strftime('%d.%m.%Y') }}
    </p>
    <p><strong>Job Title:</strong> {{ record['Job Title'] }}</p>
    <p><strong>Company Name:</strong> {{ record['Company Name'] }}</p>
    <p><strong>Salary:</strong> {{ record['Salary'] }}</p>
    <p><strong>Location:</strong> {{ record['Location'] }}</p>
    <p><strong>Full Description:</strong> {{ record['Full Description'] }}</p>
  </div>
  {% endfor %}
</div>
{% endif %}

<div class="pagination">
  <p>Page {{ page }} of {{ total_pages }}</p>
  <div class="pagination-buttons">
    {% if page > 1 %}
    <a
      href="/vacancies?page={{ page - 1 }}{% if search %}&search={{ search }}{% endif %}{% if sort_by %}&sort_by={{ sort_by }}{% endif %}{% if order %}&order={{ order }}{% endif %}"
    >
      <button>Previous</button>
    </a>
    {% endif %} {% if page < total_pages %}
    <a
      href="/vacancies?page={{ page + 1 }}{% if search %}&search={{ search }}{% endif %}{% if sort_by %}&sort_by={{ sort_by }}{% endif %}{% if order %}&order={{ order }}{% endif %}"
    >
      <button>Next</button>
    </a>
    {% endif %}
  </div>
</div>

{% endblock %}
